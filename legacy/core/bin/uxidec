#!/usr/bin/env sh

# /home/luxcium/ahmyzsh/plugins/bin/uxid

function uxid32decode() {

  UXIDSTRING="$1"
  hsh1=${UXIDSTRING:0:1}
  century02=${UXIDSTRING:1:2}
  hsh2=${UXIDSTRING:3:1}
  year02=${UXIDSTRING:4:2}
  hsh3=${UXIDSTRING:6:1}
  month02=${UXIDSTRING:7:2}
  hsh4=${UXIDSTRING:9:1}
  day02=${UXIDSTRING:10:2}
  hsh5=${UXIDSTRING:12:1}
  hour02=${UXIDSTRING:13:2}
  hsh6=${UXIDSTRING:15:1}
  minutes02=${UXIDSTRING:16:2}
  hsh7=${UXIDSTRING:18:1}
  control05=${UXIDSTRING:19:5}
  hsh8=${UXIDSTRING:24:1}
  seconds02=${UXIDSTRING:25:2}
  hsh9=${UXIDSTRING:27:1}
  milisecondes03=${UXIDSTRING:28:3}
  hsh10=${UXIDSTRING:31:1}
  hshall="${hsh1}${hsh2}${hsh3}${hsh4}${hsh5}${hsh6}${hsh7}${hsh8}${hsh9}${hsh10}"
  echo ""
  echo "ID Type: ${control05}"
  echo "Semi-Random ID part: ${hsh1}${hsh2}${hsh3}${hsh4}${hsh5}${hsh6}${hsh7}${hsh8}${hsh9}${hsh10}"
  echo ""
  echo $UXIDSTRING
  echo ""
  echo "Date: ${century02}${year02}/${month02}/${day02}"
  echo "Time (UTC): ${hour02}:${minutes02}:${seconds02}.${milisecondes03}"
  echo ""
  echo "${hshall}-${control05}-${century02}${year02}-${month02}-${day02}_${hour02}-${minutes02}-${seconds02}-${milisecondes03}"
  # local myxuidhash="$(/home/luxcium/ahmyzsh/plugins/bin/randx 10)"
  # local myxuiddate="$(date --utc +%C%y%m%d%H%M%S)$(date --utc +%N | cut -c -3)"
  # local fooY="${myxuidhash}UXZ${myxuiddate}ID"
  # local fooZ="${fooY:0:1}${fooY:13:2}${fooY:1:1}${fooY:15:2}${fooY:2:1}${fooY:17:2}${fooY:3:1}${fooY:19:2}${fooY:4:1}${fooY:21:2}${fooY:5:1}${fooY:23:2}${fooY:6:1}${fooY:10:2}${fooY:30:2}${fooY:12:1}${fooY:7:1}${fooY:25:2}${fooY:8:1}${fooY:27:3}${fooY:9:1}"

  # echo -n $fooZ
}
uxid32decode $@
exit 0

# 420420007117619A123UXIDZ0557357F

UXIDSTRING="$(/home/luxcium/ahmyzsh/plugins/bin/uxid)"
hsh1=${UXIDSTRING:0:1}
century02=${UXIDSTRING:1:2}
hsh2=${UXIDSTRING:3:1}
year02=${UXIDSTRING:4:2}
hsh3=${UXIDSTRING:6:1}
month02=${UXIDSTRING:7:2}
hsh4=${UXIDSTRING:9:1}
day02=${UXIDSTRING:10:2}
hsh5=${UXIDSTRING:12:1}
hour02=${UXIDSTRING:13:2}
hsh6=${UXIDSTRING:15:1}
minutes02=${UXIDSTRING:16:2}
hsh7=${UXIDSTRING:18:1}
control05=${UXIDSTRING:19:5}
hsh8=${UXIDSTRING:24:1}
seconds02=${UXIDSTRING:25:2}
hsh9=${UXIDSTRING:27:1}
milisecondes03=${UXIDSTRING:28:3}
hsh10=${UXIDSTRING:31:1}
hshall="${hsh1}${hsh2}${hsh3}${hsh4}${hsh5}${hsh6}${hsh7}${hsh8}${hsh9}${hsh10}"
echo ""
echo "ID Type: ${control05}"
echo "Semi-Random ID part: ${hsh1}${hsh2}${hsh3}${hsh4}${hsh5}${hsh6}${hsh7}${hsh8}${hsh9}${hsh10}"
echo ""
echo $UXIDSTRING
echo ""
echo "Date: ${century02}${year02}/${month02}/${day02}"
echo "Time (UTC): ${hour02}:${minutes02}:${seconds02}.${milisecondes03}"
echo ""
echo -n "${hshall}-${control05}-${century02}${year02}-${month02}-${day02}_${hour02}-${minutes02}-${seconds02}-${milisecondes03}"

REV_UXIDSTRING=4E5D377918-UXIDZ-2020-07-17_19-41-32-040

# 420E20507D173197417UXIDZ93210408
# 420E20507D173197417UXIDZ93210408

rhsh1=${REV_UXIDSTRING:0:1}
rcentury02=${REV_UXIDSTRING:17:2}
rhsh2=${REV_UXIDSTRING:1:1}
ryear02=${REV_UXIDSTRING:19:2}
rhsh3=${REV_UXIDSTRING:2:1}
rmonth02=${REV_UXIDSTRING:22:2}
rhsh4=${REV_UXIDSTRING:3:1}
rday02=${REV_UXIDSTRING:25:2}
rhsh5=${REV_UXIDSTRING:4:1}
rhour02=${REV_UXIDSTRING:28:2}
rhsh6=${REV_UXIDSTRING:5:1}
rminutes02=${REV_UXIDSTRING:31:2}
rhsh7=${REV_UXIDSTRING:6:1}
rcontrol05=${REV_UXIDSTRING:11:5}
rhsh8=${REV_UXIDSTRING:7:1}
rseconds02=${REV_UXIDSTRING:34:2}
rhsh9=${REV_UXIDSTRING:8:1}
rmilisecondes03=${REV_UXIDSTRING:37:3}
rhsh10=${REV_UXIDSTRING:9:1}

echo "${rhsh1}${rcentury02}${rhsh2}${ryear02}${rhsh3}${rmonth02}${rhsh4}${rday02}${rhsh5}${rhour02}${rhsh6}${rminutes02}${rhsh7}${rcontrol05}${rhsh8}${rseconds02}${rhsh9}${rmilisecondes03}${rhsh10}"

# 20D20C07D179183044R

# 2 4 6 8 10 12 14 16 18 20 22 24

# ABCDEFGHIJKLMNOPQRSTUVWXYZ012345
# B20F20E07517118415DUXIDZ927B9640
# 1  4  7  10 13 16 19 22 25 28 31
#  2  5  8  11 14 17 20 23 26 29 32
#   3  6  9  12 15 18 21 24 27 30
# B 20 F 20 E 07 5 17 1 18 4 15 D UXIDZ 9 27 B 964 0
# -1 century -1 year -1 month -1 day -1 hour -1 minutes -i UXIDZ -1 secondes -1 milisecondes -1
# %C 2 %y 2 %M 2 %D 2 %H 2 %m 2 %CONTROL 5 %S 2 %N 3 %
# 1 3 4 6 7 9 10 12 14 15 17 18 23 24 26 29 29 30

# 0-1 B
# 1-2 20
# 3-1 F
# 4-2 20
# 6-1 E
# 7-2 07
# 9-1 5
# 10-2 17
# 12-1 1
# 13-2 18
# 15-1 4
# 16-2 15
# 18-1 D
# 19-5 UXIDZ
# 24-1 9
# 25-2 27
# 27-1 B
# 28-3 964
# 31-1 0

# echo "Century : ${century02}"
# echo "Year : ${year02}"
# echo "Month : ${month02}"
# echo "Day : ${day02}"
# echo "Hour : ${hour02}"
# echo "Minute : ${minutes02}"
# echo "Control STRING : ${control05}"
# echo "Seconds : ${seconds02}"
# echo "MiliSeconds : ${milisecondes03}"

# echo "Control 1: ${hsh1}"
# echo "Control 2: ${hsh2}"
# echo "Control 3: ${hsh3}"
# echo "Control 4: ${hsh4}"
# echo "Control 5: ${hsh5}"
# echo "Control 6: ${hsh6}"
# echo "Control 7: ${hsh7}"
# echo "Control 8: ${hsh8}"
# echo "Control 9: ${hsh9}"
# echo "Control 10: ${hsh10}"

# 0-1 B
# 1-2 20
# 3-1 F
# 4-2 20
# 6-1 E
# 7-2 07
# 9-1 5
# 10-2 17
# 12-1 1
# 13-2 18
# 15-1 4
# 16-2 15
# 18-1 D
# 19-5 UXIDZ
# 24-1 9
# 25-2 27
# 27-1 B
# 28-3 964
# 31-1 0

# total 32

# 32 ABCDEFGHIJKLMNOPQRSTUVWXYZ012345
# 31 ABCDEFGHIJKLMNOPQRSTUVWXYZ01234
# 20 ABCDEFGHIJKLMNOPQRSTUVWXYZ0123
# 29 ABCDEFGHIJKLMNOPQRSTUVWXYZ012
# 28 ABCDEFGHIJKLMNOPQRSTUVWXYZ01
# 27 ABCDEFGHIJKLMNOPQRSTUVWXYZ0
# 26 ABCDEFGHIJKLMNOPQRSTUVWXYZ
# 25 ABCDEFGHIJKLMNOPQRSTUVWXY
# 24 ABCDEFGHIJKLMNOPQRSTUVWX
# 23 ABCDEFGHIJKLMNOPQRSTUVW
# 22 ABCDEFGHIJKLMNOPQRSTUV
# 21 ABCDEFGHIJKLMNOPQRSTU
# 20 ABCDEFGHIJKLMNOPQRST
# 19 ABCDEFGHIJKLMNOPQRS
# 18 ABCDEFGHIJKLMNOPQR
# 17 ABCDEFGHIJKLMNOPQ
# 16 ABCDEFGHIJKLMNOP
# 15 ABCDEFGHIJKLMNO
# 14 ABCDEFGHIJKLMN
# 13 ABCDEFGHIJKLM
# 12 ABCDEFGHIJKL
# 11 ABCDEFGHIJK
# 10 ABCDEFGHIJ
# 9 ABCDEFGHI
# 8 ABCDEFGH
# 7 ABCDEFG
# 6 ABCDEF
# 5 ABCDE
# 4 ABCD
# 3 ABC
# 2 AB
# 1 A

# b (2)
# c
# d (4)
# e
# f (6)
# g
# h (8)
# i
# j (10)
# k
# l (12)
# m
# n (14)
# o
# p (16)
# q
# r (18)
# s
# t (20)
# u
# v (22)
# w
# x (24)
# y
# z (26)
# 0
# 1 (28)
# 2
# 3 (30)
# 4
# 5 (32)
# 6
# 7 (34)
# 8
# 9 (36)
